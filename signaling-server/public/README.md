# WebRTC Web客户端

基于现代Web技术的机器人远程监控客户端，支持实时音视频传输、录制、截图等功能。

## 功能特性

- 🎥 实时视频流显示
- 🔊 音频传输与控制
- 📷 视频截图功能
- 🎬 视频录制功能
- 📊 连接状态监控
- 📈 实时统计信息
- 🔍 全屏显示模式
- ⌨️ 键盘快捷键支持

## 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 访问Web界面
打开浏览器访问: http://localhost:8080

## 使用说明

### 连接配置
1. 输入信令服务器地址 (默认: ws://localhost:3001)
2. 点击"连接服务器"按钮
3. 在下拉列表中选择要连接的机器人
4. 等待WebRTC连接建立

### 视频控制
- **全屏模式**: 点击"🔍 全屏"按钮或按 Ctrl+F
- **截图**: 点击"📷 截图"按钮或按 Ctrl+S
- **录制**: 点击"🎥 录制"按钮或按 Ctrl+R

### 音频控制
- **静音/取消静音**: 点击"🔊 静音"按钮
- **音量调节**: 拖动音量滑块

## 网络配置

### 局域网连接
- 确保客户端和机器人在同一网络
- 使用内网IP地址连接信令服务器
- 示例: `ws://192.168.1.100:3001`

### 外网连接
- 需要配置公网信令服务器
- 可能需要TURN服务器进行NAT穿透
- 在 `webrtc-client.js` 中配置TURN服务器:

```javascript
this.iceServers = [
    { urls: 'stun:stun.l.google.com:19302' },
    { 
        urls: 'turn:your-turn-server.com:3478',
        username: 'username',
        credential: 'password'
    }
];
```

## 支持的浏览器

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

## 键盘快捷键

- `Ctrl + F`: 切换全屏模式
- `Ctrl + S`: 截图
- `Ctrl + R`: 开始/停止录制

## 故障排除

### 无法连接到信令服务器
1. 检查服务器地址是否正确
2. 确认信令服务器正在运行
3. 检查防火墙设置

### 无法看到视频
1. 确认机器人端已连接
2. 检查WebRTC连接状态
3. 查看浏览器控制台错误信息

### 视频卡顿或延迟高
1. 检查网络带宽
2. 降低视频分辨率
3. 优化网络路由

## 技术栈

- **WebRTC**: 实时音视频传输
- **WebSocket**: 信令通信
- **Modern JavaScript**: ES6+ 语法
- **CSS Grid/Flexbox**: 响应式布局
- **MediaRecorder API**: 视频录制
- **Canvas API**: 截图功能

## 开发配置

### 本地开发
```bash
# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm run serve
```

### 部署到生产环境
1. 运行 `npm run build` 构建项目
2. 将 `dist/` 目录部署到Web服务器
3. 配置HTTPS (WebRTC要求)

## 性能优化

### 网络优化
- 使用CDN加速静态资源
- 启用gzip压缩
- 配置HTTP/2

### 视频优化
- 根据网络条件调整视频质量
- 实现自适应码率
- 优化关键帧间隔

## 安全考虑

- 使用HTTPS部署
- 验证信令服务器证书
- 实现访问控制
- 定期更新依赖库

## 贡献指南

1. Fork项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request
